{"version":3,"sources":["webpack:///src/app/core/services/user/user.service.ts","webpack:///node_modules/@angular/material/button-toggle/index.d.ts.MatButtonToggle.html","webpack:///src/app/calculos/calculos.ts","webpack:///node_modules/@angular/material/card/index.d.ts.MatCard.html","webpack:///node_modules/@angular/material/card/index.d.ts.MatCardHeader.html","webpack:///node_modules/@angular/material/card/index.d.ts.MatCardTitleGroup.html","webpack:///src/app/core/services/analisis/analisis.service.ts","webpack:///src/app/core/services/projects/projects.service.ts","webpack:///node_modules/@angular/material/menu/index.d.ts._MatMenu.html","webpack:///node_modules/@angular/material/menu/index.d.ts.MatMenuItem.html","webpack:///node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.js"],"names":["UserService","http","userData","post","api_users","pipe","data","get","email","Calculos","subetapas_list","catalogoEscalasCarbono","impactosIgnorar2","nombreImpactosCompleto","idProyecto","info","BD","projectsList","materialList","materialSchemeDataList","materialSchemeProyectList","potentialTypesList","standarsList","CSEList","SIDList","SIList","ACRList","ECDList","TEDList","TEList","ULList","ECDPList","sectionList","sectionsList","PTList","conversionList","Datos","schemeProyect","errorCalculos","filter","msp","impacto_ban","nameImpacto","materialesIgnorados","materiales_EPIC","forEach","impacto","index","ignorar","sumaParaReempazos","ajustarNombre","resultado_impacto","etapas","auxEPiC","banderaMaterialEP","subetapa","subproceso","s","length","ps","num","baseDatosMaterial","bs","materiales_subetapa","msd","material","auxResultado","auxsubproceso","includes","materiales_EPD","auxMaterialesTransporte","internacional","nacional","transporteSeleccionado","value_transport","val","conversion_val","peso","push","CSEs","c","CSE","energia","sid","undefined","valorTransporte","listaACR","acr","consumos","ecd","vidaUtilID","p","vidaUtil","ul","parseFloat","consumo","valor_impacto","ECDPs","ECDP","auxsumetapa","Object","keys","element","auxsumimpacto","flag","etapa","auxsumET","toExponential","toFixed","sum","auxdata","Number","potList","auxNombre","auxnombreSalto","aux","b","name","help","spacios","numC","maxlinea","i","slice","join","sub","impactoS","porcentajesMostrados","auxReturn","auxIDImpacto","ciclo","subEtapa","opcion","auxcolor","auxlabels","auxDataLabels","nombre_caso","_i","auxl","auxv","valor","concat","toString","color","auxValor","backgroundColor","regreso","datos","labels","projectL","idP","UFL","res","superficieConstruida","auxidUse","useLife","valorCarbono","determinaValorCarbono","AnalisisService","proyectos","api_electricity_consumption_deconstructive_process","api_useful_life","api_type_energy","api_type_energy_data","api_electricity_consumption_data","api_annual_consumption_required","api_source_information","api_source_information_data","api_construction_stage","api_potetnial_types","api_standards","api_scheme_project","api_material_scheme_data","id","changes","put","api_sections","api_materials","api_potential_transport","api_conversions","api_db_material","ProjectsService","projectData","api_projects","schemeData","api_scheme_project_original","project","console","log","global","factory","module","exports","Chart","hasOwnProperty","helpers","devicePixelRatio","window","screen","deviceXDPI","logicalXDPI","utils","toTextLines","inputs","lines","input","pop","unshift","apply","split","Array","isArray","isNullOrUndef","toFontString","font","size","family","style","weight","textSize","ctx","items","ilen","prev","width","string","Math","max","measureText","height","lineHeight","parseFont","value","defaults","valueOrDefault","defaultFontSize","defaultFontFamily","options","toLineHeight","defaultFontStyle","bound","min","arrayDiff","a0","a1","updates","j","v","indexOf","splice","rasterize","round","orient","point","origin","x0","x","y0","y","dx","dy","ln","sqrt","aligned","vx","vy","align","PI","cos","sin","R_INSIDE","R_LEFT","R_RIGHT","R_BOTTOM","R_TOP","region","rect","left","right","top","bottom","clipped","segment","area","x1","y1","r0","r1","r","compute","range","config","anchor","clamp","positioners","arc","vm","angle","startAngle","endAngle","innerRadius","outerRadius","rx","radius","ry","sx","sy","horizontal","base","abs","fallback","helpers$1","boundingRects","model","borderWidth","padding","th","tw","tx","ty","frame","w","h","text","getScaleOrigin","el","_model","scale","_scale","_xScale","_yScale","xCenter","yCenter","pixel","getBasePixel","getPositioner","elements","Arc","Point","Rectangle","drawFrame","bgColor","borderColor","beginPath","canvas","roundedRect","borderRadius","closePath","fillStyle","fill","strokeStyle","lineWidth","lineJoin","stroke","textGeometry","drawTextLine","cfg","shadow","shadowBlur","stroked","strokeText","filled","fillText","drawText","textAlign","strokeColor","textStrokeColor","strokeWidth","textStrokeWidth","textBaseline","textShadowBlur","shadowColor","textShadowColor","Label","me","_config","_index","_rects","_ctx","_el","extend","prototype","_modelize","display","context","resolve","defaultFontColor","chart","chartArea","clip","offset","opacity","toPadding","positioner","rotation","update","rects","label","dataset","callback","formatter","geometry","visible","draw","center","save","globalAlpha","translate","rotate","restore","helpers$2","MIN_INTEGER","MIN_SAFE_INTEGER","MAX_INTEGER","MAX_SAFE_INTEGER","rotated","cx","cy","projected","points","axis","pt","dp","toAxis","p0","p1","HitBox","_rotation","_rect","contains","margin","intersects","other","_points","axes","pr0","pr1","coordinates","view","vs","collide","collider","s0","s1","$layout","_visible","_box","compute$1","state","h0","_hidable","h1","layout","prepare","datasets","jlen","_set","_idx","sort","a","sa","sb","dirty","lookup","_view","helpers$3","klen","k","isObject","listeners","helpers$4","EXPANDO_KEY","DEFAULT_KEY","configure","override","datalabels","configs","merge","key","_key","reduce","target","each","fn","event","dispatchEvent","$context","groups","$groups","_dirty","dispatchMoveEvents","previous","enter","leave","handleMoveEvents","expando","_listeners","type","_labels","_hovered","handleClickEvents","handlers","click","invalidate","animating","animations","animationService","render","duration","lazy","plugins","plugin","beforeInit","_actives","beforeUpdate","_listened","_datasets","afterDatasetUpdate","args","datasetIndex","isDatasetVisible","meta","hidden","skip","active","dataIndex","merger","source","afterUpdate","afterDatasetsDraw","beforeEvent","afterEvent","actives","lastActive","register"],"mappings":"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","file":"default~comparar-comparar-module-ngfactory~home-evamed-home-evamed-module-ngfactory-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { tap  } from 'rxjs/operators';\nimport { environment } from './../../../../environments/environment';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService {\n\n  constructor(\n    private http: HttpClient,\n  ) { }\n\n  addUser( userData: object ) {\n    return this.http.post<any>(\n      environment.api_users,\n      userData\n    ).pipe(\n      tap((data) => {\n        return data;\n      })\n    );\n  }\n\n  getUsers() {\n    return this.http.get<any>(environment.api_users).pipe(\n      tap((data) => {\n        return data;\n      })\n    );\n  }\n\n  searchUser( email ) {\n    return this.http.get<any>(\n      environment.api_users + '?search=' + email,\n    ).pipe(\n      tap((data) => {\n        return data;\n      })\n    );\n  }\n}\n","<button #button class=\"mat-button-toggle-button mat-focus-indicator\"\n        type=\"button\"\n        [id]=\"buttonId\"\n        [attr.tabindex]=\"disabled ? -1 : tabIndex\"\n        [attr.aria-pressed]=\"checked\"\n        [disabled]=\"disabled || null\"\n        [attr.name]=\"name || null\"\n        [attr.aria-label]=\"ariaLabel\"\n        [attr.aria-labelledby]=\"ariaLabelledby\"\n        (click)=\"_onButtonClick()\">\n  <div class=\"mat-button-toggle-label-content\">\n    <ng-content></ng-content>\n  </div>\n</button>\n\n<div class=\"mat-button-toggle-focus-overlay\"></div>\n<div class=\"mat-button-toggle-ripple\" matRipple\n     [matRippleTrigger]=\"button\"\n     [matRippleDisabled]=\"this.disableRipple || this.disabled\">\n</div>\n","import subetapasInfo from 'src/app/calculos/Subetapas.json';\r\nimport escalasCarbono from 'src/app/calculos/EscalasCarbono.json';\r\nimport { Injectable } from '@angular/core';\r\nimport { element } from 'protractor';\r\nimport { concat } from 'rxjs-compat/operator/concat';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class Calculos {\r\n  materiales_EPIC: number;\r\n  materiales_EPD: number;\r\n  subetapas_list: any = subetapasInfo;\r\n  catalogoEscalasCarbono :any = escalasCarbono;\r\n  projectsList: [];\r\n  materialList: [];\r\n  materialSchemeDataList: [];\r\n  materialSchemeProyectList: [];\r\n  potentialTypesList: [];\r\n  standarsList: [];\r\n  CSEList: [];\r\n  SIDList: [];\r\n  SIList: [];\r\n  ACRList: [];\r\n  ECDList: [];\r\n  TEDList: [];\r\n  TEList: [];\r\n  ULList: [];\r\n  ECDPList: [];\r\n  sectionList: [];\r\n  PTList:[];\r\n  conversionList:[];\r\n\r\n  impactosIgnorar2 = [\r\n    'PARNR',\r\n    'POT',\r\n    'Human toxicity',\r\n    'Fresh water aquatic ecotox.',\r\n    'Marine aquatic ecotoxicity',\r\n    'Terrestrial ecotoxicity',\r\n  ];\r\n  nombreImpactosCompleto = [];\r\n\r\n  constructor(\r\n  ) {}\r\n\r\n  OperacionesDeFase(idProyecto,info,BD) {\r\n    this.projectsList = info.projectsList;\r\n    this.materialList = info.materialList;\r\n    this.materialSchemeDataList = info.materialSchemeDataList;\r\n    this.materialSchemeProyectList = info.materialSchemeProyectList;\r\n    this.potentialTypesList = info.potentialTypesList;\r\n    this.standarsList = info.standarsList;\r\n    this.CSEList = info.CSEList;\r\n    this.SIDList = info.SIDList;\r\n    this.SIList = info.SIList;\r\n    this.ACRList = info.ACRList;\r\n    this.ECDList = info.ECDList;\r\n    this.TEDList = info.TEDList;\r\n    this.TEList = info.TEList;\r\n    this.ULList = info.ULList;\r\n    this.ECDPList = info.ECDPList;\r\n    this.sectionList = info.sectionsList;\r\n    this.PTList = info.PTList;\r\n    this.conversionList =  info.conversionList;\r\n    let Datos = {};\r\n    let schemeProyect = null;\r\n    let errorCalculos = false;\r\n\r\n    schemeProyect = this.materialSchemeProyectList.filter(\r\n      (msp) => msp['project_id'] == idProyecto\r\n    );\r\n\r\n    let impacto_ban = true;\r\n    let nameImpacto: string;\r\n    let materialesIgnorados = [];\r\n\r\n    this.materiales_EPIC = 0;\r\n    this.potentialTypesList.forEach((impacto, index) => {\r\n      this.impactosIgnorar2.forEach((ignorar) => {\r\n        if (impacto['name_potential_type'] === ignorar) {\r\n          impacto_ban = false;\r\n        }\r\n      });\r\n      if (impacto_ban) {\r\n        let sumaParaReempazos = {};\r\n        nameImpacto = impacto['name_complete_potential_type'];\r\n        nameImpacto = this.ajustarNombre(nameImpacto);\r\n        Datos[nameImpacto] = {};\r\n        let resultado_impacto = 0;\r\n        //Cálculos de la sección de producción\r\n        let etapas = [2, 3, 4]; //Subetaps A1 A2 y A3\r\n        Datos[nameImpacto]['Producción'] = {};\r\n        let auxEPiC = [];\r\n        let banderaMaterialEP = false;\r\n        etapas.forEach((subetapa) => {\r\n          let subproceso = this.standarsList.filter(\r\n            (s) => s['id'] == subetapa\r\n          )[0]['name_standard'];\r\n          if (schemeProyect.length > 0) {\r\n            schemeProyect.forEach((ps, num) => {\r\n              let baseDatosMaterial = this.materialList.filter((bs)=> bs['id']==ps['material_id']);\r\n              if(BD[baseDatosMaterial[0]['database_from']]){\r\n                if(baseDatosMaterial[0]['database_from'] != 'EPiC'){\r\n                  let materiales_subetapa = this.materialSchemeDataList.filter(\r\n                    (msd) =>\r\n                    msd['material_id'] == ps['material_id'] &&\r\n                    msd['standard_id'] == subetapa &&\r\n                    msd['potential_type_id'] == impacto['id']\r\n                    );\r\n                  if (materiales_subetapa.length > 0) {\r\n                    banderaMaterialEP = false;\r\n                    materiales_subetapa.forEach((material, index) => {\r\n                      resultado_impacto =\r\n                        resultado_impacto +\r\n                        materiales_subetapa[index]['value'] * ps['quantity'];\r\n                    });\r\n                  }\r\n                }else{\r\n                  let materiales_subetapa = this.materialSchemeDataList.filter(\r\n                    (msd) =>\r\n                    msd['material_id'] == ps['material_id'] &&\r\n                    msd['standard_id'] == 1 &&\r\n                    msd['potential_type_id'] == impacto['id']\r\n                    );\r\n                  if (materiales_subetapa.length > 0) {\r\n                    let auxResultado = 0;\r\n                    banderaMaterialEP = false;\r\n                    materiales_subetapa.forEach((material, index) => {\r\n                      auxResultado =\r\n                        auxResultado +\r\n                        materiales_subetapa[index]['value'] * ps['quantity'];\r\n\r\n                    });\r\n                    let auxsubproceso = this.standarsList.filter(\r\n                      (s) => s['id'] == 1\r\n                    )[0]['name_standard'];\r\n                    if(!auxEPiC.includes(auxsubproceso)){\r\n                      Datos[nameImpacto]['Producción'][auxsubproceso] = 0;\r\n                    }\r\n                    Datos[nameImpacto]['Producción'][auxsubproceso] += auxResultado;\r\n                  }\r\n                }\r\n              }\r\n              Datos[nameImpacto]['Producción'][subproceso] = resultado_impacto;\r\n            });\r\n          }\r\n          resultado_impacto = 0;\r\n        });\r\n        this.materiales_EPD = schemeProyect.length - this.materiales_EPIC;\r\n        //console.log(Datos[nameImpacto]['Producción'])\r\n        resultado_impacto = 0;\r\n        //Construcción\r\n        Datos[nameImpacto]['Construccion'] = {};\r\n        //A4 Transporte\r\n        let auxMaterialesTransporte = [];\r\n        if (schemeProyect.length > 0) {\r\n          schemeProyect.forEach((ps) => {\r\n            let baseDatosMaterial = this.materialList.filter((bs)=> bs['id']==ps['material_id']);\r\n            let internacional;\r\n            let nacional;\r\n            if (ps['distance_init'] == null) {\r\n              internacional = 0;\r\n            } else {\r\n              let transporteSeleccionado = 1;\r\n              if (ps['transport_id_origin'] != null) {\r\n                transporteSeleccionado = ps['transport_id_origin'];\r\n              }\r\n              let value_transport = this.PTList.filter(\r\n                (val) =>\r\n                  val['potential_type_id'] == impacto['id'] &&\r\n                  val['transport_id'] == transporteSeleccionado\r\n              );\r\n              internacional = value_transport[0]['value'] * ps['distance_init'];\r\n            }\r\n            if (ps['distance_end'] == null) {\r\n              nacional = 0;\r\n            } else {\r\n              let transporteSeleccionado = 4;\r\n              if (ps['transport_id_end'] != null) {\r\n                transporteSeleccionado = ps['transport_id_end'];\r\n              }\r\n              let value_transport = this.PTList.filter(\r\n                (val) =>\r\n                  val['potential_type_id'] == impacto['id'] &&\r\n                  val['transport_id'] == transporteSeleccionado\r\n              );\r\n              nacional = value_transport[0]['value'] * ps['distance_end'];\r\n            }\r\n            let conversion_val = this.conversionList.filter(\r\n              (val) => val['material_id'] == ps['material_id']\r\n            );\r\n            let peso = 1;\r\n            if (conversion_val.length > 0) {\r\n              peso = conversion_val[0]['value'];\r\n            }\r\n            if(BD[baseDatosMaterial[0]['database_from']]){\r\n              if(!auxMaterialesTransporte.includes(ps['material_id'])){\r\n                sumaParaReempazos[ps['material_id']]=0;\r\n                auxMaterialesTransporte.push(ps['material_id']);\r\n              }\r\n              resultado_impacto =\r\n                resultado_impacto +\r\n                peso * ps['quantity'] * (nacional + internacional);\r\n              sumaParaReempazos[ps['material_id']] +=  peso * ps['quantity'] * (nacional + internacional);\r\n            }\r\n          });\r\n        }\r\n        Datos[nameImpacto]['Construccion']['A4'] = resultado_impacto;\r\n        //console.log(Datos[nameImpacto]['Construccion'])\r\n        resultado_impacto = 0;\r\n        //A5 instalación\r\n        let CSEs = this.CSEList.filter((c) => c['project_id'] == idProyecto);\r\n        if (CSEs.length > 0) {\r\n          CSEs.forEach((CSE) => {\r\n            let energia = this.SIDList.filter(\r\n              (sid) =>\r\n                sid['sourceInformarion_id'] == CSE['source_information_id'] &&\r\n                sid['potential_type_id'] == impacto['id']\r\n            );\r\n            if (energia.length > 0) {\r\n              resultado_impacto =\r\n                resultado_impacto + energia[0]['value'] * CSE['quantity'];\r\n            }\r\n          });\r\n        }\r\n        Datos[nameImpacto]['Construccion']['A5'] = resultado_impacto;\r\n        //console.log('A5:',resultado_impacto);\r\n        //Uso\r\n        resultado_impacto = 0;\r\n        Datos[nameImpacto]['Uso'] = {};\r\n        //B4\r\n        //las etapas son las mismas que en la sección de producción\r\n        //console.log(sumaParaReempazos)\r\n        if (schemeProyect.length > 0) {\r\n          schemeProyect.forEach((ps, num) => {\r\n          let baseDatosMaterial = this.materialList.filter((bs)=> bs['id']==ps['material_id']);\r\n          if(BD[baseDatosMaterial[0]['database_from']]){\r\n            if(baseDatosMaterial[0]['database_from'] != 'EPiC'){\r\n              if(sumaParaReempazos[ps['material_id']]!=undefined){\r\n                let valorTransporte = 0\r\n                valorTransporte = sumaParaReempazos[ps['material_id']];\r\n                resultado_impacto =\r\n                        resultado_impacto + (valorTransporte * ps['replaces']);\r\n              }\r\n              etapas.forEach((subetapa) => {\r\n                let materiales_subetapa = this.materialSchemeDataList.filter(\r\n                  (msd) =>\r\n                  msd['material_id'] == ps['material_id'] &&\r\n                  msd['standard_id'] == subetapa &&\r\n                  msd['potential_type_id'] == impacto['id']\r\n                );\r\n                if (materiales_subetapa.length > 0) {\r\n                  materiales_subetapa.forEach((material, index) => {\r\n                    resultado_impacto =\r\n                        resultado_impacto +\r\n                        (materiales_subetapa[index]['value'] * ps['quantity'])* ps['replaces'];\r\n                    });\r\n                  }\r\n                });\r\n              }else{\r\n                if(sumaParaReempazos[ps['material_id']]!=undefined){\r\n                  let valorTransporte = 0\r\n                  valorTransporte = sumaParaReempazos[ps['material_id']];\r\n                  resultado_impacto =\r\n                          resultado_impacto + (valorTransporte * ps['replaces']);\r\n                }\r\n                let materiales_subetapa = this.materialSchemeDataList.filter(\r\n                  (msd) =>\r\n                    msd['material_id'] == ps['material_id'] &&\r\n                    msd['standard_id'] == 1 &&\r\n                    msd['potential_type_id'] == impacto['id']\r\n                );\r\n                if (materiales_subetapa.length > 0) {\r\n                  materiales_subetapa.forEach((material, index) => {\r\n                    resultado_impacto =\r\n                        resultado_impacto +\r\n                        ((materiales_subetapa[index]['value'] *\r\n                          ps['quantity']))*\r\n                          ps['replaces'];\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          });\r\n        }\r\n\r\n        Datos[nameImpacto]['Uso']['B4'] = resultado_impacto;\r\n        //console.log( Datos[nameImpacto]['Uso'])\r\n        resultado_impacto = 0;\r\n        //B6\r\n        //Se obtiene consumo anual\r\n        let listaACR = this.ACRList.filter(\r\n          (acr) => acr['project_id'] == idProyecto\r\n        );\r\n        if (listaACR.length > 0) {\r\n          let consumos = this.ECDList.filter(\r\n            (ecd) => ecd['annual_consumption_required_id'] == listaACR[0]['id']\r\n          );\r\n          let vidaUtilID = this.projectsList.filter(\r\n            (p) => p['id'] == idProyecto\r\n          )[0]['useful_life_id'];\r\n          let vidaUtil: any = this.ULList.filter(\r\n            (ul) => ul['id'] == vidaUtilID\r\n          )[0]['name_useful_life'];\r\n          try {\r\n            vidaUtil = parseFloat(vidaUtil);\r\n          } catch {\r\n            vidaUtil = 1;\r\n          }\r\n          consumos.forEach((consumo) => {\r\n            let valor_impacto = this.TEDList.filter(\r\n              (sid) =>\r\n                sid['type_energy_id'] == consumo['type'] &&\r\n                sid['potential_type_id'] == impacto['id']\r\n            );\r\n            if (valor_impacto.length > 0) {\r\n              resultado_impacto =\r\n                resultado_impacto +\r\n                vidaUtil * valor_impacto[0]['value'] * consumo['quantity'];\r\n            }\r\n          });\r\n        }\r\n        Datos[nameImpacto]['Uso']['B6'] = resultado_impacto;\r\n        //console.log('Uso:',resultado_impacto)\r\n        //Fin de vida\r\n        resultado_impacto = 0;\r\n        Datos[nameImpacto]['FinDeVida'] = {};\r\n        //C1\r\n        let ECDPs = this.ECDPList.filter((c) => c['project_id'] == idProyecto);\r\n        if (ECDPs.length > 0) {\r\n          ECDPs.forEach((ECDP) => {\r\n            let energia = this.SIDList.filter(\r\n              (sid) =>\r\n              sid['sourceInformarion_id'] == ECDP['source_information_id'] &&\r\n              sid['potential_type_id'] == impacto['id']\r\n              );\r\n            if(energia.length>0){\r\n              resultado_impacto =\r\n                resultado_impacto + ECDP['quantity'] * energia[0]['value'];\r\n            }else{\r\n              errorCalculos = true;\r\n            }\r\n          });\r\n        }\r\n        Datos[nameImpacto]['FinDeVida']['C1'] = resultado_impacto;\r\n        //C2\r\n        Datos[nameImpacto]['FinDeVida']['C2'] = 0;\r\n        //C3\r\n        Datos[nameImpacto]['FinDeVida']['C3'] = 0;\r\n        //C4\r\n        Datos[nameImpacto]['FinDeVida']['C4'] = 0;\r\n        //console.log('Fin de vida',resultado_impacto)\r\n      }\r\n      impacto_ban = true;\r\n    });\r\n    return [Datos, errorCalculos];\r\n  }\r\n\r\n  ValoresProcentaje(data,ignorar) {\r\n    let auxsumetapa = {};\r\n    Object.keys(data).forEach((element) => {\r\n      let auxsumimpacto = 0;\r\n      auxsumetapa[element] = {};\r\n      let flag = true;\r\n      Object.keys(data[element]).forEach((etapa) => {\r\n        ignorar.forEach(element => {\r\n          if(element == etapa)\r\n            flag=false;\r\n        });\r\n        Object.keys(data[element][etapa]).forEach((subetapa) => {\r\n          if(flag){\r\n            auxsumimpacto = auxsumimpacto + data[element][etapa][subetapa];\r\n          }\r\n        });\r\n        flag = true;\r\n      });\r\n      Object.keys(data[element]).forEach((etapa) => {\r\n        flag = true;\r\n        let auxsumET = 0;\r\n        ignorar.forEach(element => {\r\n          if(element == etapa)\r\n            flag=false\r\n        });\r\n        auxsumetapa[element][etapa] = {};\r\n        auxsumetapa[element][etapa]['num'] = 0;\r\n        if(flag){\r\n          Object.keys(data[element][etapa]).forEach((subetapa) => {\r\n            auxsumetapa[element][etapa]['num'] =\r\n              auxsumetapa[element][etapa]['num'] + data[element][etapa][subetapa];\r\n          });\r\n        }\r\n        auxsumET =  auxsumetapa[element][etapa]['num'];\r\n        auxsumetapa[element][etapa]['num'] =\r\n        auxsumetapa[element][etapa]['num'].toExponential(2);\r\n        if(auxsumimpacto != 0){\r\n          auxsumetapa[element][etapa]['porcentaje'] = (\r\n            (auxsumET / auxsumimpacto) *\r\n            100\r\n          ).toFixed(2);\r\n        }else{\r\n          auxsumetapa[element][etapa]['porcentaje'] = 0\r\n        }\r\n      });\r\n    });\r\n\r\n    return auxsumetapa;\r\n  }\r\n\r\n  ValoresProcentajeSubeapa(data,ignorar) {\r\n    let auxsumetapa = {};\r\n    let flag = true;\r\n    Object.keys(data).forEach((element) => {\r\n      let auxsumimpacto = 0;\r\n      auxsumetapa[element] = {};\r\n      Object.keys(data[element]).forEach((etapa) => {\r\n        ignorar.forEach(element => {\r\n          if(element == etapa)\r\n            flag=false;\r\n        });\r\n        if(flag){\r\n          Object.keys(data[element][etapa]).forEach((subetapa) => {\r\n            auxsumimpacto = auxsumimpacto + data[element][etapa][subetapa];\r\n          });\r\n        }\r\n        flag=true;\r\n      });\r\n      Object.keys(data[element]).forEach((etapa) => {\r\n        ignorar.forEach(element => {\r\n          if(element == etapa)\r\n            flag=false;\r\n        });\r\n        auxsumetapa[element][etapa] = {};\r\n        Object.keys(data[element][etapa]).forEach((subetapa) => {\r\n          auxsumetapa[element][etapa][subetapa] = {};\r\n          if(flag){\r\n            auxsumetapa[element][etapa][subetapa]['num'] =\r\n              data[element][etapa][subetapa].toExponential(2);\r\n          }else{\r\n            auxsumetapa[element][etapa][subetapa]['num'] = 0;\r\n          }\r\n          if(auxsumimpacto != 0){\r\n            auxsumetapa[element][etapa][subetapa]['porcentaje'] = (\r\n              (auxsumetapa[element][etapa][subetapa]['num'] / auxsumimpacto) *\r\n              100\r\n            ).toFixed(1);\r\n          }else{\r\n            auxsumetapa[element][etapa][subetapa]['porcentaje'] = 0\r\n          }\r\n        });\r\n        flag=true\r\n      });\r\n    });\r\n\r\n    return auxsumetapa;\r\n  }\r\n\r\n  Porcentaje(data) {\r\n    let sum = 0;\r\n    let auxdata = [];\r\n    data.forEach((element) => {\r\n      sum = sum + Number(element);\r\n    });\r\n    data.forEach((element) => {\r\n      auxdata.push((Number(element) / sum * 100).toFixed(1));\r\n    });\r\n    return auxdata;\r\n  }\r\n\r\n  ImpactosSeleccionados(potList) {\r\n    let impacto_ban = true;\r\n    let auxNombre = [];\r\n    let auxnombreSalto: string;\r\n    auxNombre.push(\"ciclo de vida\")\r\n    potList.forEach((impacto, index) => {\r\n      this.impactosIgnorar2.forEach((ignorar) => {\r\n        if (impacto['name_potential_type'] === ignorar) {\r\n          impacto_ban = false;\r\n        }\r\n      });\r\n      if (impacto_ban) {\r\n        auxnombreSalto = impacto['name_complete_potential_type'];\r\n        auxNombre.push(auxnombreSalto);\r\n        //auxNombre.push(this.ajustarNombre(auxnombreSalto));\r\n      }\r\n      impacto_ban = true;\r\n    });\r\n    return auxNombre;\r\n  }\r\n\r\n  FiltradoDeImpactos(data) {\r\n    let aux = [9, 10, 11, 12, 13, 14];\r\n    let b = true;\r\n    let auxdata = [];\r\n    data.forEach((element, index) => {\r\n      aux.forEach((ignorar) => {\r\n        if (element['id'] == ignorar) {\r\n          b = false;\r\n        }\r\n      });\r\n      if (b) {\r\n        auxdata.push(element);\r\n      }\r\n    });\r\n    return auxdata;\r\n  }\r\n\r\n  ajustarNombre(name: string) {\r\n    let help = name;\r\n    let spacios=0;\r\n    let numC=0;\r\n    let maxlinea=0;\r\n    for (let i of help){\r\n      if(i===' '){\r\n        spacios=spacios+1;\r\n        if(spacios==1 && maxlinea >= 9){\r\n          help = [help.slice(0, numC), '\\n', help.slice(numC)].join('');\r\n          spacios=0;\r\n          maxlinea = 0;\r\n          numC=numC+1;\r\n        }\r\n        if(spacios==2){\r\n          help = [help.slice(0, numC), '\\n', help.slice(numC)].join('');\r\n          spacios=0;\r\n          numC=numC+1;\r\n        }\r\n      }\r\n      maxlinea=maxlinea+1;\r\n      numC=numC+1;\r\n    }\r\n    \r\n    //console.log(help);\r\n    return help\r\n  }\r\n\r\n  findColor(subetapa) {\r\n    let sub = this.subetapas_list.filter((s) => s['abreviacion'] === subetapa);\r\n    return sub[0]['color'];\r\n  }\r\n\r\n  findSubetapas(etapa,impactoS,porcentajesMostrados) {\r\n    let auxReturn =[]\r\n    Object.keys(porcentajesMostrados).forEach(impacto => {\r\n      let auxIDImpacto = this.ajustarNombre(impactoS)\r\n      if(impacto === auxIDImpacto){\r\n        Object.keys(porcentajesMostrados[impacto]).forEach(ciclo =>{\r\n          if(ciclo ===etapa){\r\n            Object.keys(porcentajesMostrados[impacto][ciclo]).forEach(subEtapa =>{\r\n              let aux =  this.subetapas_list.filter((s) => s['abreviacion'] == subEtapa);\r\n              auxReturn.push(aux[0])\r\n            })\r\n          }\r\n        })\r\n      }\r\n    })\r\n    return auxReturn;\r\n  }\r\n\r\n  llenarGraficaCarbono(opcion){\r\n    let auxdata =[]\r\n    let aux=[]\r\n    let auxcolor = []\r\n    let auxlabels = []\r\n    let auxDataLabels = {1:\"A\",2:\"B\",3:\"C\",4:\"D\",5:\"E\",6:\"F\",7:\"G\"}\r\n    this.catalogoEscalasCarbono.forEach(element => {\r\n      if(element.nombre_caso === opcion){\r\n        for (var _i = 1; _i < 8; _i++) {\r\n          let auxl = \"\"\r\n          let auxv = 0\r\n          var valor = \"valor_\".concat(_i.toString());\r\n          var color = \"color_\".concat(_i.toString())\r\n          auxcolor.push(element[color])\r\n          if(element[valor].length>1){\r\n            auxl = auxl.concat((element[valor][0]).toString()).concat(\" - \").concat((element[valor][1]).toString())\r\n            if(_i != 1){\r\n              let auxValor =  \"valor_\".concat((_i-1).toString());\r\n              auxv = element[auxValor][0]\r\n            }\r\n            auxdata.push(element[valor][1] + auxv)\r\n          }else{\r\n            if(_i == 1){\r\n              auxl = auxl.concat((element[valor][0]).toString()).concat(\" < \")\r\n              auxdata.push(element[valor][0])\r\n            }else{\r\n              let auxValor =  \"valor_\".concat((_i-1).toString());\r\n              auxv = element[auxValor][0]\r\n              auxl = auxl.concat((element[valor][0]).toString()).concat(\" > \")\r\n              auxdata.push(element[valor][0] + auxv)\r\n            }\r\n          }\r\n          auxl = auxl.concat(\" : \").concat(auxDataLabels[_i])\r\n          auxlabels.push(auxl)\r\n        }\r\n      }\r\n    });\r\n    aux = [...aux,\r\n    {\r\n      data:auxdata,\r\n      backgroundColor:auxcolor\r\n    }]\r\n    let regreso = {datos:aux,labels:auxlabels}\r\n    return regreso\r\n  }\r\n\r\n  determinaValorCarbono(data,projectL,idP,UFL){\r\n    let impacto = this.ajustarNombre(\"Calentamiento Global\");\r\n    let res = 0;\r\n    Object.keys(data[impacto][\"Uso\"]).forEach(subetapa =>{\r\n      res += data[impacto][\"Uso\"][subetapa]\r\n    })\r\n    let superficieConstruida = 0;\r\n    superficieConstruida=projectL.filter( p => p['id'] == idP)[0]['living_area']\r\n    let auxidUse=projectL.filter( p => p['id'] == idP)[0]['useful_life_id']\r\n    let useLife= Number(UFL.filter( p => p['id'] == auxidUse)[0]['name_useful_life'])\r\n    //useful_life_id\r\n    res = res/superficieConstruida\r\n    res = res / useLife\r\n    return res;\r\n  }\r\n\r\n  determinarDescripcionCarbono(opcion){\r\n    let aux=\"\"\r\n    this.catalogoEscalasCarbono.forEach(element => {\r\n      if(element.nombre_caso === opcion){\r\n        aux = element['descripcion']\r\n      }\r\n    });\r\n    return aux\r\n  }\r\n\r\n  buscarValosCarbono(data,opcion,projectL,idP,UFL){\r\n    let aux = {}\r\n    let valorCarbono = this.determinaValorCarbono(data,projectL,idP,UFL);\r\n    this.catalogoEscalasCarbono.forEach(element => {\r\n      if(element.nombre_caso === opcion){\r\n        for (var _i = 1; _i < 8; _i++) {\r\n          var valor = \"valor_\".concat(_i.toString());\r\n          var color = \"color_\".concat(_i.toString());\r\n          aux[valor] = \"#FFFFFF\"\r\n          if(element[valor].length>1){\r\n            if ((valorCarbono <= element[valor][1])&&(valorCarbono >= element[valor][0])) {\r\n              aux[valor] = element[color]\r\n            }\r\n          }else{\r\n            if(_i ==1){\r\n              if(valorCarbono < element[valor][0]){\r\n                aux[valor] = element[color]\r\n              }\r\n            }else{\r\n              if(valorCarbono > element[valor][0]){\r\n                aux[valor] = element[color]\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n    return aux\r\n  }\r\n}\r\n","<ng-content></ng-content>\n<ng-content select=\"mat-card-footer\"></ng-content>\n","<ng-content select=\"[mat-card-avatar], [matCardAvatar]\"></ng-content>\n<div class=\"mat-card-header-text\">\n  <ng-content\n      select=\"mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]\"></ng-content>\n</div>\n<ng-content></ng-content>\n","<div>\n  <ng-content\n      select=\"mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]\"></ng-content>\n</div>\n<ng-content select=\"img\"></ng-content>\n<ng-content></ng-content>\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { tap } from 'rxjs/operators';\r\nimport { environment } from './../../../../environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class AnalisisService {\r\n  proyectos = [];\r\n  constructor(private http: HttpClient) {\r\n    // this._getProjects().subscribe( data => {\r\n    //   this.proyectos = data;\r\n    // });\r\n  }\r\n\r\n  getECDP() {\r\n    return this.http\r\n      .get<any>(environment.api_electricity_consumption_deconstructive_process)\r\n      .pipe(\r\n        tap((data) => {\r\n          return data;\r\n        })\r\n      );\r\n  }\r\n\r\n  getUsefulLife() {\r\n    return this.http.get<any>(environment.api_useful_life).pipe(\r\n      tap((data) => {\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  //api_type_energy\r\n\r\n  getTypeEnergy() {\r\n    return this.http.get<any>(environment.api_type_energy).pipe(\r\n      tap((data) => {\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  getTypeEnergyData() {\r\n    return this.http.get<any>(environment.api_type_energy_data).pipe(\r\n      tap((data) => {\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  getElectricityConsumptionData() {\r\n    return this.http\r\n      .get<any>(environment.api_electricity_consumption_data)\r\n      .pipe(\r\n        tap((data) => {\r\n          return data;\r\n        })\r\n      );\r\n  }\r\n\r\n  getAnnualConsumptionRequired() {\r\n    return this.http.get<any>(environment.api_annual_consumption_required).pipe(\r\n      tap((data) => {\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  getSourceInformation() {\r\n    return this.http.get<any>(environment.api_source_information).pipe(\r\n      tap((data) => {\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  getSourceInformationData() {\r\n    return this.http.get<any>(environment.api_source_information_data).pipe(\r\n      tap((data) => {\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  getConstructiveSystemElement() {\r\n    return this.http.get<any>(environment.api_construction_stage).pipe(\r\n      tap((data) => {\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  getPotentialTypes() {\r\n    return this.http.get<any>(environment.api_potetnial_types).pipe(\r\n      tap((data) => {\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  getStandars() {\r\n    return this.http.get<any>(environment.api_standards).pipe(\r\n      tap((data) => {\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  getMaterialSchemeProyect() {\r\n    return this.http.get<any>(environment.api_scheme_project).pipe(\r\n      tap((data) => {\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  getMaterialSchemeData() {\r\n    return this.http.get<any>(environment.api_material_scheme_data).pipe(\r\n      tap((data) => {\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  updateMaterialSchemeData(id: string, changes) {\r\n    return this.http\r\n      .put(`${environment.api_material_scheme_data}${id}/`, changes)\r\n      .pipe(\r\n        tap((data) => {\r\n          return data;\r\n        })\r\n      );\r\n  }\r\n\r\n  addMaterialSchemeData(data: object) {\r\n    return this.http.post<any>(environment.api_material_scheme_data, data).pipe(\r\n      tap((data) => {\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  getSectionsList() {\r\n    return this.http.get<any>(environment.api_sections).pipe(\r\n      tap((data) => {\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  getMaterials() {\r\n    return this.http.get<any>(environment.api_materials).pipe(\r\n      tap((data) => {\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  getPotentialTransport() {\r\n    return this.http.get<any>(environment.api_potential_transport).pipe(\r\n      tap((data) => {\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  getConversion() {\r\n    return this.http.get<any>(environment.api_conversions).pipe(\r\n      tap((data) => {\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n\r\n  getDB() {\r\n    return this.http.get<any>(environment.api_db_material).pipe(\r\n      tap((data) => {\r\n        return data;\r\n      })\r\n    );\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { tap } from 'rxjs/operators';\nimport { environment } from './../../../../environments/environment';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProjectsService {\n  constructor(private http: HttpClient) {}\n\n  addProject(projectData: object) {\n    return this.http.post<any>(environment.api_projects, projectData).pipe(\n      tap((data) => {\n        return data;\n      })\n    );\n  }\n\n  getProjectById(id: string) {\n    return this.http.get(`${environment.api_projects}${id}/`).pipe(\n      tap((data) => {\n        return data;\n      })\n    );\n  }\n\n  updateProyect(id: string, changes) {\n    return this.http.put(`${environment.api_projects}${id}/`, changes).pipe(\n      tap((data) => {\n        return data;\n      })\n    );\n  }\n\n  deleteProject(id: number) {\n    return this.http.delete(`${environment.api_projects}${id}/`).pipe(\n      tap((data) => {\n        return data;\n      })\n    );\n  }\n\n  addSchemeProject(schemeData: object) {\n    return this.http.post<any>(environment.api_scheme_project, schemeData).pipe(\n      tap((data) => {\n        return data;\n      })\n    );\n  }\n\n  addSchemeProjectOriginal(schemeData: object) {\n    return this.http\n      .post<any>(environment.api_scheme_project_original, schemeData)\n      .pipe(\n        tap((data) => {\n          return data;\n        })\n      );\n  }\n\n  getMaterialSchemeProyect() {\n    return this.http.get<any>(environment.api_scheme_project).pipe(\n      tap((data) => {\n        return data;\n      })\n    );\n  }\n\n  updateMaterialSchemeProject(id: string, changes) {\n    return this.http\n      .put(`${environment.api_scheme_project}${id}/`, changes)\n      .pipe(\n        tap((data) => {\n          return data;\n        })\n      );\n  }\n\n  getMaterialSchemeProyectOrigin() {\n    return this.http.get<any>(environment.api_scheme_project_original).pipe(\n      tap((data) => {\n        return data;\n      })\n    );\n  }\n\n  getProjects() {\n    return this.http.get<any>(environment.api_projects).pipe(\n      tap((data) => {\n        return data;\n      })\n    );\n  }\n\n  searchProject(project) {\n    console.log(environment.api_projects + '?search=' + project);\n    return this.http\n      .get<any>(environment.api_projects + '?search=' + project)\n      .pipe(\n        tap((data) => {\n          return data;\n        })\n      );\n  }\n}\n","<ng-template>\n  <div\n    class=\"mat-menu-panel\"\n    [id]=\"panelId\"\n    [ngClass]=\"_classList\"\n    (keydown)=\"_handleKeydown($event)\"\n    (click)=\"closed.emit('click')\"\n    [@transformMenu]=\"_panelAnimationState\"\n    (@transformMenu.start)=\"_onAnimationStart($event)\"\n    (@transformMenu.done)=\"_onAnimationDone($event)\"\n    tabindex=\"-1\"\n    role=\"menu\"\n    [attr.aria-label]=\"ariaLabel || null\"\n    [attr.aria-labelledby]=\"ariaLabelledby || null\"\n    [attr.aria-describedby]=\"ariaDescribedby || null\">\n    <div class=\"mat-menu-content\">\n      <ng-content></ng-content>\n    </div>\n  </div>\n</ng-template>\n","<ng-content></ng-content>\n<div class=\"mat-menu-ripple\" matRipple\n     [matRippleDisabled]=\"disableRipple || disabled\"\n     [matRippleTrigger]=\"_getHostElement()\">\n</div>\n","/*!\n * chartjs-plugin-datalabels v0.7.0\n * https://chartjs-plugin-datalabels.netlify.com\n * (c) 2019 Chart.js Contributors\n * Released under the MIT license\n */\n(function (global, factory) {\ntypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('chart.js')) :\ntypeof define === 'function' && define.amd ? define(['chart.js'], factory) :\n(global = global || self, global.ChartDataLabels = factory(global.Chart));\n}(this, function (Chart) { 'use strict';\n\nChart = Chart && Chart.hasOwnProperty('default') ? Chart['default'] : Chart;\n\nvar helpers = Chart.helpers;\n\nvar devicePixelRatio = (function() {\n\tif (typeof window !== 'undefined') {\n\t\tif (window.devicePixelRatio) {\n\t\t\treturn window.devicePixelRatio;\n\t\t}\n\n\t\t// devicePixelRatio is undefined on IE10\n\t\t// https://stackoverflow.com/a/20204180/8837887\n\t\t// https://github.com/chartjs/chartjs-plugin-datalabels/issues/85\n\t\tvar screen = window.screen;\n\t\tif (screen) {\n\t\t\treturn (screen.deviceXDPI || 1) / (screen.logicalXDPI || 1);\n\t\t}\n\t}\n\n\treturn 1;\n}());\n\nvar utils = {\n\t// @todo move this in Chart.helpers.toTextLines\n\ttoTextLines: function(inputs) {\n\t\tvar lines = [];\n\t\tvar input;\n\n\t\tinputs = [].concat(inputs);\n\t\twhile (inputs.length) {\n\t\t\tinput = inputs.pop();\n\t\t\tif (typeof input === 'string') {\n\t\t\t\tlines.unshift.apply(lines, input.split('\\n'));\n\t\t\t} else if (Array.isArray(input)) {\n\t\t\t\tinputs.push.apply(inputs, input);\n\t\t\t} else if (!helpers.isNullOrUndef(inputs)) {\n\t\t\t\tlines.unshift('' + input);\n\t\t\t}\n\t\t}\n\n\t\treturn lines;\n\t},\n\n\t// @todo move this method in Chart.helpers.canvas.toFont (deprecates helpers.fontString)\n\t// @see https://developer.mozilla.org/en-US/docs/Web/CSS/font\n\ttoFontString: function(font) {\n\t\tif (!font || helpers.isNullOrUndef(font.size) || helpers.isNullOrUndef(font.family)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (font.style ? font.style + ' ' : '')\n\t\t\t+ (font.weight ? font.weight + ' ' : '')\n\t\t\t+ font.size + 'px '\n\t\t\t+ font.family;\n\t},\n\n\t// @todo move this in Chart.helpers.canvas.textSize\n\t// @todo cache calls of measureText if font doesn't change?!\n\ttextSize: function(ctx, lines, font) {\n\t\tvar items = [].concat(lines);\n\t\tvar ilen = items.length;\n\t\tvar prev = ctx.font;\n\t\tvar width = 0;\n\t\tvar i;\n\n\t\tctx.font = font.string;\n\n\t\tfor (i = 0; i < ilen; ++i) {\n\t\t\twidth = Math.max(ctx.measureText(items[i]).width, width);\n\t\t}\n\n\t\tctx.font = prev;\n\n\t\treturn {\n\t\t\theight: ilen * font.lineHeight,\n\t\t\twidth: width\n\t\t};\n\t},\n\n\t// @todo move this method in Chart.helpers.options.toFont\n\tparseFont: function(value) {\n\t\tvar global = Chart.defaults.global;\n\t\tvar size = helpers.valueOrDefault(value.size, global.defaultFontSize);\n\t\tvar font = {\n\t\t\tfamily: helpers.valueOrDefault(value.family, global.defaultFontFamily),\n\t\t\tlineHeight: helpers.options.toLineHeight(value.lineHeight, size),\n\t\t\tsize: size,\n\t\t\tstyle: helpers.valueOrDefault(value.style, global.defaultFontStyle),\n\t\t\tweight: helpers.valueOrDefault(value.weight, null),\n\t\t\tstring: ''\n\t\t};\n\n\t\tfont.string = utils.toFontString(font);\n\t\treturn font;\n\t},\n\n\t/**\n\t * Returns value bounded by min and max. This is equivalent to max(min, min(value, max)).\n\t * @todo move this method in Chart.helpers.bound\n\t * https://doc.qt.io/qt-5/qtglobal.html#qBound\n\t */\n\tbound: function(min, value, max) {\n\t\treturn Math.max(min, Math.min(value, max));\n\t},\n\n\t/**\n\t * Returns an array of pair [value, state] where state is:\n\t * * -1: value is only in a0 (removed)\n\t * *  1: value is only in a1 (added)\n\t */\n\tarrayDiff: function(a0, a1) {\n\t\tvar prev = a0.slice();\n\t\tvar updates = [];\n\t\tvar i, j, ilen, v;\n\n\t\tfor (i = 0, ilen = a1.length; i < ilen; ++i) {\n\t\t\tv = a1[i];\n\t\t\tj = prev.indexOf(v);\n\n\t\t\tif (j === -1) {\n\t\t\t\tupdates.push([v, 1]);\n\t\t\t} else {\n\t\t\t\tprev.splice(j, 1);\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, ilen = prev.length; i < ilen; ++i) {\n\t\t\tupdates.push([prev[i], -1]);\n\t\t}\n\n\t\treturn updates;\n\t},\n\n\t/**\n\t * https://github.com/chartjs/chartjs-plugin-datalabels/issues/70\n\t */\n\trasterize: function(v) {\n\t\treturn Math.round(v * devicePixelRatio) / devicePixelRatio;\n\t}\n};\n\nfunction orient(point, origin) {\n\tvar x0 = origin.x;\n\tvar y0 = origin.y;\n\n\tif (x0 === null) {\n\t\treturn {x: 0, y: -1};\n\t}\n\tif (y0 === null) {\n\t\treturn {x: 1, y: 0};\n\t}\n\n\tvar dx = point.x - x0;\n\tvar dy = point.y - y0;\n\tvar ln = Math.sqrt(dx * dx + dy * dy);\n\n\treturn {\n\t\tx: ln ? dx / ln : 0,\n\t\ty: ln ? dy / ln : -1\n\t};\n}\n\nfunction aligned(x, y, vx, vy, align) {\n\tswitch (align) {\n\tcase 'center':\n\t\tvx = vy = 0;\n\t\tbreak;\n\tcase 'bottom':\n\t\tvx = 0;\n\t\tvy = 1;\n\t\tbreak;\n\tcase 'right':\n\t\tvx = 1;\n\t\tvy = 0;\n\t\tbreak;\n\tcase 'left':\n\t\tvx = -1;\n\t\tvy = 0;\n\t\tbreak;\n\tcase 'top':\n\t\tvx = 0;\n\t\tvy = -1;\n\t\tbreak;\n\tcase 'start':\n\t\tvx = -vx;\n\t\tvy = -vy;\n\t\tbreak;\n\tcase 'end':\n\t\t// keep natural orientation\n\t\tbreak;\n\tdefault:\n\t\t// clockwise rotation (in degree)\n\t\talign *= (Math.PI / 180);\n\t\tvx = Math.cos(align);\n\t\tvy = Math.sin(align);\n\t\tbreak;\n\t}\n\n\treturn {\n\t\tx: x,\n\t\ty: y,\n\t\tvx: vx,\n\t\tvy: vy\n\t};\n}\n\n// Line clipping (Cohen–Sutherland algorithm)\n// https://en.wikipedia.org/wiki/Cohen–Sutherland_algorithm\n\nvar R_INSIDE = 0;\nvar R_LEFT = 1;\nvar R_RIGHT = 2;\nvar R_BOTTOM = 4;\nvar R_TOP = 8;\n\nfunction region(x, y, rect) {\n\tvar res = R_INSIDE;\n\n\tif (x < rect.left) {\n\t\tres |= R_LEFT;\n\t} else if (x > rect.right) {\n\t\tres |= R_RIGHT;\n\t}\n\tif (y < rect.top) {\n\t\tres |= R_TOP;\n\t} else if (y > rect.bottom) {\n\t\tres |= R_BOTTOM;\n\t}\n\n\treturn res;\n}\n\nfunction clipped(segment, area) {\n\tvar x0 = segment.x0;\n\tvar y0 = segment.y0;\n\tvar x1 = segment.x1;\n\tvar y1 = segment.y1;\n\tvar r0 = region(x0, y0, area);\n\tvar r1 = region(x1, y1, area);\n\tvar r, x, y;\n\n\t// eslint-disable-next-line no-constant-condition\n\twhile (true) {\n\t\tif (!(r0 | r1) || (r0 & r1)) {\n\t\t\t// both points inside or on the same side: no clipping\n\t\t\tbreak;\n\t\t}\n\n\t\t// at least one point is outside\n\t\tr = r0 || r1;\n\n\t\tif (r & R_TOP) {\n\t\t\tx = x0 + (x1 - x0) * (area.top - y0) / (y1 - y0);\n\t\t\ty = area.top;\n\t\t} else if (r & R_BOTTOM) {\n\t\t\tx = x0 + (x1 - x0) * (area.bottom - y0) / (y1 - y0);\n\t\t\ty = area.bottom;\n\t\t} else if (r & R_RIGHT) {\n\t\t\ty = y0 + (y1 - y0) * (area.right - x0) / (x1 - x0);\n\t\t\tx = area.right;\n\t\t} else if (r & R_LEFT) {\n\t\t\ty = y0 + (y1 - y0) * (area.left - x0) / (x1 - x0);\n\t\t\tx = area.left;\n\t\t}\n\n\t\tif (r === r0) {\n\t\t\tx0 = x;\n\t\t\ty0 = y;\n\t\t\tr0 = region(x0, y0, area);\n\t\t} else {\n\t\t\tx1 = x;\n\t\t\ty1 = y;\n\t\t\tr1 = region(x1, y1, area);\n\t\t}\n\t}\n\n\treturn {\n\t\tx0: x0,\n\t\tx1: x1,\n\t\ty0: y0,\n\t\ty1: y1\n\t};\n}\n\nfunction compute(range, config) {\n\tvar anchor = config.anchor;\n\tvar segment = range;\n\tvar x, y;\n\n\tif (config.clamp) {\n\t\tsegment = clipped(segment, config.area);\n\t}\n\n\tif (anchor === 'start') {\n\t\tx = segment.x0;\n\t\ty = segment.y0;\n\t} else if (anchor === 'end') {\n\t\tx = segment.x1;\n\t\ty = segment.y1;\n\t} else {\n\t\tx = (segment.x0 + segment.x1) / 2;\n\t\ty = (segment.y0 + segment.y1) / 2;\n\t}\n\n\treturn aligned(x, y, range.vx, range.vy, config.align);\n}\n\nvar positioners = {\n\tarc: function(vm, config) {\n\t\tvar angle = (vm.startAngle + vm.endAngle) / 2;\n\t\tvar vx = Math.cos(angle);\n\t\tvar vy = Math.sin(angle);\n\t\tvar r0 = vm.innerRadius;\n\t\tvar r1 = vm.outerRadius;\n\n\t\treturn compute({\n\t\t\tx0: vm.x + vx * r0,\n\t\t\ty0: vm.y + vy * r0,\n\t\t\tx1: vm.x + vx * r1,\n\t\t\ty1: vm.y + vy * r1,\n\t\t\tvx: vx,\n\t\t\tvy: vy\n\t\t}, config);\n\t},\n\n\tpoint: function(vm, config) {\n\t\tvar v = orient(vm, config.origin);\n\t\tvar rx = v.x * vm.radius;\n\t\tvar ry = v.y * vm.radius;\n\n\t\treturn compute({\n\t\t\tx0: vm.x - rx,\n\t\t\ty0: vm.y - ry,\n\t\t\tx1: vm.x + rx,\n\t\t\ty1: vm.y + ry,\n\t\t\tvx: v.x,\n\t\t\tvy: v.y\n\t\t}, config);\n\t},\n\n\trect: function(vm, config) {\n\t\tvar v = orient(vm, config.origin);\n\t\tvar x = vm.x;\n\t\tvar y = vm.y;\n\t\tvar sx = 0;\n\t\tvar sy = 0;\n\n\t\tif (vm.horizontal) {\n\t\t\tx = Math.min(vm.x, vm.base);\n\t\t\tsx = Math.abs(vm.base - vm.x);\n\t\t} else {\n\t\t\ty = Math.min(vm.y, vm.base);\n\t\t\tsy = Math.abs(vm.base - vm.y);\n\t\t}\n\n\t\treturn compute({\n\t\t\tx0: x,\n\t\t\ty0: y + sy,\n\t\t\tx1: x + sx,\n\t\t\ty1: y,\n\t\t\tvx: v.x,\n\t\t\tvy: v.y\n\t\t}, config);\n\t},\n\n\tfallback: function(vm, config) {\n\t\tvar v = orient(vm, config.origin);\n\n\t\treturn compute({\n\t\t\tx0: vm.x,\n\t\t\ty0: vm.y,\n\t\t\tx1: vm.x,\n\t\t\ty1: vm.y,\n\t\t\tvx: v.x,\n\t\t\tvy: v.y\n\t\t}, config);\n\t}\n};\n\nvar helpers$1 = Chart.helpers;\nvar rasterize = utils.rasterize;\n\nfunction boundingRects(model) {\n\tvar borderWidth = model.borderWidth || 0;\n\tvar padding = model.padding;\n\tvar th = model.size.height;\n\tvar tw = model.size.width;\n\tvar tx = -tw / 2;\n\tvar ty = -th / 2;\n\n\treturn {\n\t\tframe: {\n\t\t\tx: tx - padding.left - borderWidth,\n\t\t\ty: ty - padding.top - borderWidth,\n\t\t\tw: tw + padding.width + borderWidth * 2,\n\t\t\th: th + padding.height + borderWidth * 2\n\t\t},\n\t\ttext: {\n\t\t\tx: tx,\n\t\t\ty: ty,\n\t\t\tw: tw,\n\t\t\th: th\n\t\t}\n\t};\n}\n\nfunction getScaleOrigin(el) {\n\tvar horizontal = el._model.horizontal;\n\tvar scale = el._scale || (horizontal && el._xScale) || el._yScale;\n\n\tif (!scale) {\n\t\treturn null;\n\t}\n\n\tif (scale.xCenter !== undefined && scale.yCenter !== undefined) {\n\t\treturn {x: scale.xCenter, y: scale.yCenter};\n\t}\n\n\tvar pixel = scale.getBasePixel();\n\treturn horizontal ?\n\t\t{x: pixel, y: null} :\n\t\t{x: null, y: pixel};\n}\n\nfunction getPositioner(el) {\n\tif (el instanceof Chart.elements.Arc) {\n\t\treturn positioners.arc;\n\t}\n\tif (el instanceof Chart.elements.Point) {\n\t\treturn positioners.point;\n\t}\n\tif (el instanceof Chart.elements.Rectangle) {\n\t\treturn positioners.rect;\n\t}\n\treturn positioners.fallback;\n}\n\nfunction drawFrame(ctx, rect, model) {\n\tvar bgColor = model.backgroundColor;\n\tvar borderColor = model.borderColor;\n\tvar borderWidth = model.borderWidth;\n\n\tif (!bgColor && (!borderColor || !borderWidth)) {\n\t\treturn;\n\t}\n\n\tctx.beginPath();\n\n\thelpers$1.canvas.roundedRect(\n\t\tctx,\n\t\trasterize(rect.x) + borderWidth / 2,\n\t\trasterize(rect.y) + borderWidth / 2,\n\t\trasterize(rect.w) - borderWidth,\n\t\trasterize(rect.h) - borderWidth,\n\t\tmodel.borderRadius);\n\n\tctx.closePath();\n\n\tif (bgColor) {\n\t\tctx.fillStyle = bgColor;\n\t\tctx.fill();\n\t}\n\n\tif (borderColor && borderWidth) {\n\t\tctx.strokeStyle = borderColor;\n\t\tctx.lineWidth = borderWidth;\n\t\tctx.lineJoin = 'miter';\n\t\tctx.stroke();\n\t}\n}\n\nfunction textGeometry(rect, align, font) {\n\tvar h = font.lineHeight;\n\tvar w = rect.w;\n\tvar x = rect.x;\n\tvar y = rect.y + h / 2;\n\n\tif (align === 'center') {\n\t\tx += w / 2;\n\t} else if (align === 'end' || align === 'right') {\n\t\tx += w;\n\t}\n\n\treturn {\n\t\th: h,\n\t\tw: w,\n\t\tx: x,\n\t\ty: y\n\t};\n}\n\nfunction drawTextLine(ctx, text, cfg) {\n\tvar shadow = ctx.shadowBlur;\n\tvar stroked = cfg.stroked;\n\tvar x = rasterize(cfg.x);\n\tvar y = rasterize(cfg.y);\n\tvar w = rasterize(cfg.w);\n\n\tif (stroked) {\n\t\tctx.strokeText(text, x, y, w);\n\t}\n\n\tif (cfg.filled) {\n\t\tif (shadow && stroked) {\n\t\t\t// Prevent drawing shadow on both the text stroke and fill, so\n\t\t\t// if the text is stroked, remove the shadow for the text fill.\n\t\t\tctx.shadowBlur = 0;\n\t\t}\n\n\t\tctx.fillText(text, x, y, w);\n\n\t\tif (shadow && stroked) {\n\t\t\tctx.shadowBlur = shadow;\n\t\t}\n\t}\n}\n\nfunction drawText(ctx, lines, rect, model) {\n\tvar align = model.textAlign;\n\tvar color = model.color;\n\tvar filled = !!color;\n\tvar font = model.font;\n\tvar ilen = lines.length;\n\tvar strokeColor = model.textStrokeColor;\n\tvar strokeWidth = model.textStrokeWidth;\n\tvar stroked = strokeColor && strokeWidth;\n\tvar i;\n\n\tif (!ilen || (!filled && !stroked)) {\n\t\treturn;\n\t}\n\n\t// Adjust coordinates based on text alignment and line height\n\trect = textGeometry(rect, align, font);\n\n\tctx.font = font.string;\n\tctx.textAlign = align;\n\tctx.textBaseline = 'middle';\n\tctx.shadowBlur = model.textShadowBlur;\n\tctx.shadowColor = model.textShadowColor;\n\n\tif (filled) {\n\t\tctx.fillStyle = color;\n\t}\n\tif (stroked) {\n\t\tctx.lineJoin = 'round';\n\t\tctx.lineWidth = strokeWidth;\n\t\tctx.strokeStyle = strokeColor;\n\t}\n\n\tfor (i = 0, ilen = lines.length; i < ilen; ++i) {\n\t\tdrawTextLine(ctx, lines[i], {\n\t\t\tstroked: stroked,\n\t\t\tfilled: filled,\n\t\t\tw: rect.w,\n\t\t\tx: rect.x,\n\t\t\ty: rect.y + rect.h * i\n\t\t});\n\t}\n}\n\nvar Label = function(config, ctx, el, index) {\n\tvar me = this;\n\n\tme._config = config;\n\tme._index = index;\n\tme._model = null;\n\tme._rects = null;\n\tme._ctx = ctx;\n\tme._el = el;\n};\n\nhelpers$1.extend(Label.prototype, {\n\t/**\n\t * @private\n\t */\n\t_modelize: function(display, lines, config, context) {\n\t\tvar me = this;\n\t\tvar index = me._index;\n\t\tvar resolve = helpers$1.options.resolve;\n\t\tvar font = utils.parseFont(resolve([config.font, {}], context, index));\n\t\tvar color = resolve([config.color, Chart.defaults.global.defaultFontColor], context, index);\n\n\t\treturn {\n\t\t\talign: resolve([config.align, 'center'], context, index),\n\t\t\tanchor: resolve([config.anchor, 'center'], context, index),\n\t\t\tarea: context.chart.chartArea,\n\t\t\tbackgroundColor: resolve([config.backgroundColor, null], context, index),\n\t\t\tborderColor: resolve([config.borderColor, null], context, index),\n\t\t\tborderRadius: resolve([config.borderRadius, 0], context, index),\n\t\t\tborderWidth: resolve([config.borderWidth, 0], context, index),\n\t\t\tclamp: resolve([config.clamp, false], context, index),\n\t\t\tclip: resolve([config.clip, false], context, index),\n\t\t\tcolor: color,\n\t\t\tdisplay: display,\n\t\t\tfont: font,\n\t\t\tlines: lines,\n\t\t\toffset: resolve([config.offset, 0], context, index),\n\t\t\topacity: resolve([config.opacity, 1], context, index),\n\t\t\torigin: getScaleOrigin(me._el),\n\t\t\tpadding: helpers$1.options.toPadding(resolve([config.padding, 0], context, index)),\n\t\t\tpositioner: getPositioner(me._el),\n\t\t\trotation: resolve([config.rotation, 0], context, index) * (Math.PI / 180),\n\t\t\tsize: utils.textSize(me._ctx, lines, font),\n\t\t\ttextAlign: resolve([config.textAlign, 'start'], context, index),\n\t\t\ttextShadowBlur: resolve([config.textShadowBlur, 0], context, index),\n\t\t\ttextShadowColor: resolve([config.textShadowColor, color], context, index),\n\t\t\ttextStrokeColor: resolve([config.textStrokeColor, color], context, index),\n\t\t\ttextStrokeWidth: resolve([config.textStrokeWidth, 0], context, index)\n\t\t};\n\t},\n\n\tupdate: function(context) {\n\t\tvar me = this;\n\t\tvar model = null;\n\t\tvar rects = null;\n\t\tvar index = me._index;\n\t\tvar config = me._config;\n\t\tvar value, label, lines;\n\n\t\t// We first resolve the display option (separately) to avoid computing\n\t\t// other options in case the label is hidden (i.e. display: false).\n\t\tvar display = helpers$1.options.resolve([config.display, true], context, index);\n\n\t\tif (display) {\n\t\t\tvalue = context.dataset.data[index];\n\t\t\tlabel = helpers$1.valueOrDefault(helpers$1.callback(config.formatter, [value, context]), value);\n\t\t\tlines = helpers$1.isNullOrUndef(label) ? [] : utils.toTextLines(label);\n\n\t\t\tif (lines.length) {\n\t\t\t\tmodel = me._modelize(display, lines, config, context);\n\t\t\t\trects = boundingRects(model);\n\t\t\t}\n\t\t}\n\n\t\tme._model = model;\n\t\tme._rects = rects;\n\t},\n\n\tgeometry: function() {\n\t\treturn this._rects ? this._rects.frame : {};\n\t},\n\n\trotation: function() {\n\t\treturn this._model ? this._model.rotation : 0;\n\t},\n\n\tvisible: function() {\n\t\treturn this._model && this._model.opacity;\n\t},\n\n\tmodel: function() {\n\t\treturn this._model;\n\t},\n\n\tdraw: function(chart, center) {\n\t\tvar me = this;\n\t\tvar ctx = chart.ctx;\n\t\tvar model = me._model;\n\t\tvar rects = me._rects;\n\t\tvar area;\n\n\t\tif (!this.visible()) {\n\t\t\treturn;\n\t\t}\n\n\t\tctx.save();\n\n\t\tif (model.clip) {\n\t\t\tarea = model.area;\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(\n\t\t\t\tarea.left,\n\t\t\t\tarea.top,\n\t\t\t\tarea.right - area.left,\n\t\t\t\tarea.bottom - area.top);\n\t\t\tctx.clip();\n\t\t}\n\n\t\tctx.globalAlpha = utils.bound(0, model.opacity, 1);\n\t\tctx.translate(rasterize(center.x), rasterize(center.y));\n\t\tctx.rotate(model.rotation);\n\n\t\tdrawFrame(ctx, rects.frame, model);\n\t\tdrawText(ctx, model.lines, rects.text, model);\n\n\t\tctx.restore();\n\t}\n});\n\nvar helpers$2 = Chart.helpers;\n\nvar MIN_INTEGER = Number.MIN_SAFE_INTEGER || -9007199254740991; // eslint-disable-line es/no-number-minsafeinteger\nvar MAX_INTEGER = Number.MAX_SAFE_INTEGER || 9007199254740991;  // eslint-disable-line es/no-number-maxsafeinteger\n\nfunction rotated(point, center, angle) {\n\tvar cos = Math.cos(angle);\n\tvar sin = Math.sin(angle);\n\tvar cx = center.x;\n\tvar cy = center.y;\n\n\treturn {\n\t\tx: cx + cos * (point.x - cx) - sin * (point.y - cy),\n\t\ty: cy + sin * (point.x - cx) + cos * (point.y - cy)\n\t};\n}\n\nfunction projected(points, axis) {\n\tvar min = MAX_INTEGER;\n\tvar max = MIN_INTEGER;\n\tvar origin = axis.origin;\n\tvar i, pt, vx, vy, dp;\n\n\tfor (i = 0; i < points.length; ++i) {\n\t\tpt = points[i];\n\t\tvx = pt.x - origin.x;\n\t\tvy = pt.y - origin.y;\n\t\tdp = axis.vx * vx + axis.vy * vy;\n\t\tmin = Math.min(min, dp);\n\t\tmax = Math.max(max, dp);\n\t}\n\n\treturn {\n\t\tmin: min,\n\t\tmax: max\n\t};\n}\n\nfunction toAxis(p0, p1) {\n\tvar vx = p1.x - p0.x;\n\tvar vy = p1.y - p0.y;\n\tvar ln = Math.sqrt(vx * vx + vy * vy);\n\n\treturn {\n\t\tvx: (p1.x - p0.x) / ln,\n\t\tvy: (p1.y - p0.y) / ln,\n\t\torigin: p0,\n\t\tln: ln\n\t};\n}\n\nvar HitBox = function() {\n\tthis._rotation = 0;\n\tthis._rect = {\n\t\tx: 0,\n\t\ty: 0,\n\t\tw: 0,\n\t\th: 0\n\t};\n};\n\nhelpers$2.extend(HitBox.prototype, {\n\tcenter: function() {\n\t\tvar r = this._rect;\n\t\treturn {\n\t\t\tx: r.x + r.w / 2,\n\t\t\ty: r.y + r.h / 2\n\t\t};\n\t},\n\n\tupdate: function(center, rect, rotation) {\n\t\tthis._rotation = rotation;\n\t\tthis._rect = {\n\t\t\tx: rect.x + center.x,\n\t\t\ty: rect.y + center.y,\n\t\t\tw: rect.w,\n\t\t\th: rect.h\n\t\t};\n\t},\n\n\tcontains: function(point) {\n\t\tvar me = this;\n\t\tvar margin = 1;\n\t\tvar rect = me._rect;\n\n\t\tpoint = rotated(point, me.center(), -me._rotation);\n\n\t\treturn !(point.x < rect.x - margin\n\t\t\t|| point.y < rect.y - margin\n\t\t\t|| point.x > rect.x + rect.w + margin * 2\n\t\t\t|| point.y > rect.y + rect.h + margin * 2);\n\t},\n\n\t// Separating Axis Theorem\n\t// https://gamedevelopment.tutsplus.com/tutorials/collision-detection-using-the-separating-axis-theorem--gamedev-169\n\tintersects: function(other) {\n\t\tvar r0 = this._points();\n\t\tvar r1 = other._points();\n\t\tvar axes = [\n\t\t\ttoAxis(r0[0], r0[1]),\n\t\t\ttoAxis(r0[0], r0[3])\n\t\t];\n\t\tvar i, pr0, pr1;\n\n\t\tif (this._rotation !== other._rotation) {\n\t\t\t// Only separate with r1 axis if the rotation is different,\n\t\t\t// else it's enough to separate r0 and r1 with r0 axis only!\n\t\t\taxes.push(\n\t\t\t\ttoAxis(r1[0], r1[1]),\n\t\t\t\ttoAxis(r1[0], r1[3])\n\t\t\t);\n\t\t}\n\n\t\tfor (i = 0; i < axes.length; ++i) {\n\t\t\tpr0 = projected(r0, axes[i]);\n\t\t\tpr1 = projected(r1, axes[i]);\n\n\t\t\tif (pr0.max < pr1.min || pr1.max < pr0.min) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/**\n\t * @private\n\t */\n\t_points: function() {\n\t\tvar me = this;\n\t\tvar rect = me._rect;\n\t\tvar angle = me._rotation;\n\t\tvar center = me.center();\n\n\t\treturn [\n\t\t\trotated({x: rect.x, y: rect.y}, center, angle),\n\t\t\trotated({x: rect.x + rect.w, y: rect.y}, center, angle),\n\t\t\trotated({x: rect.x + rect.w, y: rect.y + rect.h}, center, angle),\n\t\t\trotated({x: rect.x, y: rect.y + rect.h}, center, angle)\n\t\t];\n\t}\n});\n\nfunction coordinates(view, model, geometry) {\n\tvar point = model.positioner(view, model);\n\tvar vx = point.vx;\n\tvar vy = point.vy;\n\n\tif (!vx && !vy) {\n\t\t// if aligned center, we don't want to offset the center point\n\t\treturn {x: point.x, y: point.y};\n\t}\n\n\tvar w = geometry.w;\n\tvar h = geometry.h;\n\n\t// take in account the label rotation\n\tvar rotation = model.rotation;\n\tvar dx = Math.abs(w / 2 * Math.cos(rotation)) + Math.abs(h / 2 * Math.sin(rotation));\n\tvar dy = Math.abs(w / 2 * Math.sin(rotation)) + Math.abs(h / 2 * Math.cos(rotation));\n\n\t// scale the unit vector (vx, vy) to get at least dx or dy equal to\n\t// w or h respectively (else we would calculate the distance to the\n\t// ellipse inscribed in the bounding rect)\n\tvar vs = 1 / Math.max(Math.abs(vx), Math.abs(vy));\n\tdx *= vx * vs;\n\tdy *= vy * vs;\n\n\t// finally, include the explicit offset\n\tdx += model.offset * vx;\n\tdy += model.offset * vy;\n\n\treturn {\n\t\tx: point.x + dx,\n\t\ty: point.y + dy\n\t};\n}\n\nfunction collide(labels, collider) {\n\tvar i, j, s0, s1;\n\n\t// IMPORTANT Iterate in the reverse order since items at the end of the\n\t// list have an higher weight/priority and thus should be less impacted\n\t// by the overlapping strategy.\n\n\tfor (i = labels.length - 1; i >= 0; --i) {\n\t\ts0 = labels[i].$layout;\n\n\t\tfor (j = i - 1; j >= 0 && s0._visible; --j) {\n\t\t\ts1 = labels[j].$layout;\n\n\t\t\tif (s1._visible && s0._box.intersects(s1._box)) {\n\t\t\t\tcollider(s0, s1);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn labels;\n}\n\nfunction compute$1(labels) {\n\tvar i, ilen, label, state, geometry, center;\n\n\t// Initialize labels for overlap detection\n\tfor (i = 0, ilen = labels.length; i < ilen; ++i) {\n\t\tlabel = labels[i];\n\t\tstate = label.$layout;\n\n\t\tif (state._visible) {\n\t\t\tgeometry = label.geometry();\n\t\t\tcenter = coordinates(label._el._model, label.model(), geometry);\n\t\t\tstate._box.update(center, geometry, label.rotation());\n\t\t}\n\t}\n\n\t// Auto hide overlapping labels\n\treturn collide(labels, function(s0, s1) {\n\t\tvar h0 = s0._hidable;\n\t\tvar h1 = s1._hidable;\n\n\t\tif ((h0 && h1) || h1) {\n\t\t\ts1._visible = false;\n\t\t} else if (h0) {\n\t\t\ts0._visible = false;\n\t\t}\n\t});\n}\n\nvar layout = {\n\tprepare: function(datasets) {\n\t\tvar labels = [];\n\t\tvar i, j, ilen, jlen, label;\n\n\t\tfor (i = 0, ilen = datasets.length; i < ilen; ++i) {\n\t\t\tfor (j = 0, jlen = datasets[i].length; j < jlen; ++j) {\n\t\t\t\tlabel = datasets[i][j];\n\t\t\t\tlabels.push(label);\n\t\t\t\tlabel.$layout = {\n\t\t\t\t\t_box: new HitBox(),\n\t\t\t\t\t_hidable: false,\n\t\t\t\t\t_visible: true,\n\t\t\t\t\t_set: i,\n\t\t\t\t\t_idx: j\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\t// TODO New `z` option: labels with a higher z-index are drawn\n\t\t// of top of the ones with a lower index. Lowest z-index labels\n\t\t// are also discarded first when hiding overlapping labels.\n\t\tlabels.sort(function(a, b) {\n\t\t\tvar sa = a.$layout;\n\t\t\tvar sb = b.$layout;\n\n\t\t\treturn sa._idx === sb._idx\n\t\t\t\t? sb._set - sa._set\n\t\t\t\t: sb._idx - sa._idx;\n\t\t});\n\n\t\tthis.update(labels);\n\n\t\treturn labels;\n\t},\n\n\tupdate: function(labels) {\n\t\tvar dirty = false;\n\t\tvar i, ilen, label, model, state;\n\n\t\tfor (i = 0, ilen = labels.length; i < ilen; ++i) {\n\t\t\tlabel = labels[i];\n\t\t\tmodel = label.model();\n\t\t\tstate = label.$layout;\n\t\t\tstate._hidable = model && model.display === 'auto';\n\t\t\tstate._visible = label.visible();\n\t\t\tdirty |= state._hidable;\n\t\t}\n\n\t\tif (dirty) {\n\t\t\tcompute$1(labels);\n\t\t}\n\t},\n\n\tlookup: function(labels, point) {\n\t\tvar i, state;\n\n\t\t// IMPORTANT Iterate in the reverse order since items at the end of\n\t\t// the list have an higher z-index, thus should be picked first.\n\n\t\tfor (i = labels.length - 1; i >= 0; --i) {\n\t\t\tstate = labels[i].$layout;\n\n\t\t\tif (state && state._visible && state._box.contains(point)) {\n\t\t\t\treturn labels[i];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\tdraw: function(chart, labels) {\n\t\tvar i, ilen, label, state, geometry, center;\n\n\t\tfor (i = 0, ilen = labels.length; i < ilen; ++i) {\n\t\t\tlabel = labels[i];\n\t\t\tstate = label.$layout;\n\n\t\t\tif (state._visible) {\n\t\t\t\tgeometry = label.geometry();\n\t\t\t\tcenter = coordinates(label._el._view, label.model(), geometry);\n\t\t\t\tstate._box.update(center, geometry, label.rotation());\n\t\t\t\tlabel.draw(chart, center);\n\t\t\t}\n\t\t}\n\t}\n};\n\nvar helpers$3 = Chart.helpers;\n\nvar formatter = function(value) {\n\tif (helpers$3.isNullOrUndef(value)) {\n\t\treturn null;\n\t}\n\n\tvar label = value;\n\tvar keys, klen, k;\n\tif (helpers$3.isObject(value)) {\n\t\tif (!helpers$3.isNullOrUndef(value.label)) {\n\t\t\tlabel = value.label;\n\t\t} else if (!helpers$3.isNullOrUndef(value.r)) {\n\t\t\tlabel = value.r;\n\t\t} else {\n\t\t\tlabel = '';\n\t\t\tkeys = Object.keys(value);\n\t\t\tfor (k = 0, klen = keys.length; k < klen; ++k) {\n\t\t\t\tlabel += (k !== 0 ? ', ' : '') + keys[k] + ': ' + value[keys[k]];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn '' + label;\n};\n\n/**\n * IMPORTANT: make sure to also update tests and TypeScript definition\n * files (`/test/specs/defaults.spec.js` and `/types/options.d.ts`)\n */\n\nvar defaults = {\n\talign: 'center',\n\tanchor: 'center',\n\tbackgroundColor: null,\n\tborderColor: null,\n\tborderRadius: 0,\n\tborderWidth: 0,\n\tclamp: false,\n\tclip: false,\n\tcolor: undefined,\n\tdisplay: true,\n\tfont: {\n\t\tfamily: undefined,\n\t\tlineHeight: 1.2,\n\t\tsize: undefined,\n\t\tstyle: undefined,\n\t\tweight: null\n\t},\n\tformatter: formatter,\n\tlabels: undefined,\n\tlisteners: {},\n\toffset: 4,\n\topacity: 1,\n\tpadding: {\n\t\ttop: 4,\n\t\tright: 4,\n\t\tbottom: 4,\n\t\tleft: 4\n\t},\n\trotation: 0,\n\ttextAlign: 'start',\n\ttextStrokeColor: undefined,\n\ttextStrokeWidth: 0,\n\ttextShadowBlur: 0,\n\ttextShadowColor: undefined\n};\n\n/**\n * @see https://github.com/chartjs/Chart.js/issues/4176\n */\n\nvar helpers$4 = Chart.helpers;\nvar EXPANDO_KEY = '$datalabels';\nvar DEFAULT_KEY = '$default';\n\nfunction configure(dataset, options) {\n\tvar override = dataset.datalabels;\n\tvar listeners = {};\n\tvar configs = [];\n\tvar labels, keys;\n\n\tif (override === false) {\n\t\treturn null;\n\t}\n\tif (override === true) {\n\t\toverride = {};\n\t}\n\n\toptions = helpers$4.merge({}, [options, override]);\n\tlabels = options.labels || {};\n\tkeys = Object.keys(labels);\n\tdelete options.labels;\n\n\tif (keys.length) {\n\t\tkeys.forEach(function(key) {\n\t\t\tif (labels[key]) {\n\t\t\t\tconfigs.push(helpers$4.merge({}, [\n\t\t\t\t\toptions,\n\t\t\t\t\tlabels[key],\n\t\t\t\t\t{_key: key}\n\t\t\t\t]));\n\t\t\t}\n\t\t});\n\t} else {\n\t\t// Default label if no \"named\" label defined.\n\t\tconfigs.push(options);\n\t}\n\n\t// listeners: {<event-type>: {<label-key>: <fn>}}\n\tlisteners = configs.reduce(function(target, config) {\n\t\thelpers$4.each(config.listeners || {}, function(fn, event) {\n\t\t\ttarget[event] = target[event] || {};\n\t\t\ttarget[event][config._key || DEFAULT_KEY] = fn;\n\t\t});\n\n\t\tdelete config.listeners;\n\t\treturn target;\n\t}, {});\n\n\treturn {\n\t\tlabels: configs,\n\t\tlisteners: listeners\n\t};\n}\n\nfunction dispatchEvent(chart, listeners, label) {\n\tif (!listeners) {\n\t\treturn;\n\t}\n\n\tvar context = label.$context;\n\tvar groups = label.$groups;\n\tvar callback;\n\n\tif (!listeners[groups._set]) {\n\t\treturn;\n\t}\n\n\tcallback = listeners[groups._set][groups._key];\n\tif (!callback) {\n\t\treturn;\n\t}\n\n\tif (helpers$4.callback(callback, [context]) === true) {\n\t\t// Users are allowed to tweak the given context by injecting values that can be\n\t\t// used in scriptable options to display labels differently based on the current\n\t\t// event (e.g. highlight an hovered label). That's why we update the label with\n\t\t// the output context and schedule a new chart render by setting it dirty.\n\t\tchart[EXPANDO_KEY]._dirty = true;\n\t\tlabel.update(context);\n\t}\n}\n\nfunction dispatchMoveEvents(chart, listeners, previous, label) {\n\tvar enter, leave;\n\n\tif (!previous && !label) {\n\t\treturn;\n\t}\n\n\tif (!previous) {\n\t\tenter = true;\n\t} else if (!label) {\n\t\tleave = true;\n\t} else if (previous !== label) {\n\t\tleave = enter = true;\n\t}\n\n\tif (leave) {\n\t\tdispatchEvent(chart, listeners.leave, previous);\n\t}\n\tif (enter) {\n\t\tdispatchEvent(chart, listeners.enter, label);\n\t}\n}\n\nfunction handleMoveEvents(chart, event) {\n\tvar expando = chart[EXPANDO_KEY];\n\tvar listeners = expando._listeners;\n\tvar previous, label;\n\n\tif (!listeners.enter && !listeners.leave) {\n\t\treturn;\n\t}\n\n\tif (event.type === 'mousemove') {\n\t\tlabel = layout.lookup(expando._labels, event);\n\t} else if (event.type !== 'mouseout') {\n\t\treturn;\n\t}\n\n\tprevious = expando._hovered;\n\texpando._hovered = label;\n\tdispatchMoveEvents(chart, listeners, previous, label);\n}\n\nfunction handleClickEvents(chart, event) {\n\tvar expando = chart[EXPANDO_KEY];\n\tvar handlers = expando._listeners.click;\n\tvar label = handlers && layout.lookup(expando._labels, event);\n\tif (label) {\n\t\tdispatchEvent(chart, handlers, label);\n\t}\n}\n\n// https://github.com/chartjs/chartjs-plugin-datalabels/issues/108\nfunction invalidate(chart) {\n\tif (chart.animating) {\n\t\treturn;\n\t}\n\n\t// `chart.animating` can be `false` even if there is animation in progress,\n\t// so let's iterate all animations to find if there is one for the `chart`.\n\tvar animations = Chart.animationService.animations;\n\tfor (var i = 0, ilen = animations.length; i < ilen; ++i) {\n\t\tif (animations[i].chart === chart) {\n\t\t\treturn;\n\t\t}\n\t}\n\n\t// No render scheduled: trigger a \"lazy\" render that can be canceled in case\n\t// of hover interactions. The 1ms duration is a workaround to make sure an\n\t// animation is created so the controller can stop it before any transition.\n\tchart.render({duration: 1, lazy: true});\n}\n\nChart.defaults.global.plugins.datalabels = defaults;\n\nvar plugin = {\n\tid: 'datalabels',\n\n\tbeforeInit: function(chart) {\n\t\tchart[EXPANDO_KEY] = {\n\t\t\t_actives: []\n\t\t};\n\t},\n\n\tbeforeUpdate: function(chart) {\n\t\tvar expando = chart[EXPANDO_KEY];\n\t\texpando._listened = false;\n\t\texpando._listeners = {};     // {<event-type>: {<dataset-index>: {<label-key>: <fn>}}}\n\t\texpando._datasets = [];      // per dataset labels: [Label[]]\n\t\texpando._labels = [];        // layouted labels: Label[]\n\t},\n\n\tafterDatasetUpdate: function(chart, args, options) {\n\t\tvar datasetIndex = args.index;\n\t\tvar expando = chart[EXPANDO_KEY];\n\t\tvar labels = expando._datasets[datasetIndex] = [];\n\t\tvar visible = chart.isDatasetVisible(datasetIndex);\n\t\tvar dataset = chart.data.datasets[datasetIndex];\n\t\tvar config = configure(dataset, options);\n\t\tvar elements = args.meta.data || [];\n\t\tvar ctx = chart.ctx;\n\t\tvar i, j, ilen, jlen, cfg, key, el, label;\n\n\t\tctx.save();\n\n\t\tfor (i = 0, ilen = elements.length; i < ilen; ++i) {\n\t\t\tel = elements[i];\n\t\t\tel[EXPANDO_KEY] = [];\n\n\t\t\tif (visible && el && !el.hidden && !el._model.skip) {\n\t\t\t\tfor (j = 0, jlen = config.labels.length; j < jlen; ++j) {\n\t\t\t\t\tcfg = config.labels[j];\n\t\t\t\t\tkey = cfg._key;\n\n\t\t\t\t\tlabel = new Label(cfg, ctx, el, i);\n\t\t\t\t\tlabel.$groups = {\n\t\t\t\t\t\t_set: datasetIndex,\n\t\t\t\t\t\t_key: key || DEFAULT_KEY\n\t\t\t\t\t};\n\t\t\t\t\tlabel.$context = {\n\t\t\t\t\t\tactive: false,\n\t\t\t\t\t\tchart: chart,\n\t\t\t\t\t\tdataIndex: i,\n\t\t\t\t\t\tdataset: dataset,\n\t\t\t\t\t\tdatasetIndex: datasetIndex\n\t\t\t\t\t};\n\n\t\t\t\t\tlabel.update(label.$context);\n\t\t\t\t\tel[EXPANDO_KEY].push(label);\n\t\t\t\t\tlabels.push(label);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tctx.restore();\n\n\t\t// Store listeners at the chart level and per event type to optimize\n\t\t// cases where no listeners are registered for a specific event.\n\t\thelpers$4.merge(expando._listeners, config.listeners, {\n\t\t\tmerger: function(event, target, source) {\n\t\t\t\ttarget[event] = target[event] || {};\n\t\t\t\ttarget[event][args.index] = source[event];\n\t\t\t\texpando._listened = true;\n\t\t\t}\n\t\t});\n\t},\n\n\tafterUpdate: function(chart, options) {\n\t\tchart[EXPANDO_KEY]._labels = layout.prepare(\n\t\t\tchart[EXPANDO_KEY]._datasets,\n\t\t\toptions);\n\t},\n\n\t// Draw labels on top of all dataset elements\n\t// https://github.com/chartjs/chartjs-plugin-datalabels/issues/29\n\t// https://github.com/chartjs/chartjs-plugin-datalabels/issues/32\n\tafterDatasetsDraw: function(chart) {\n\t\tlayout.draw(chart, chart[EXPANDO_KEY]._labels);\n\t},\n\n\tbeforeEvent: function(chart, event) {\n\t\t// If there is no listener registered for this chart, `listened` will be false,\n\t\t// meaning we can immediately ignore the incoming event and avoid useless extra\n\t\t// computation for users who don't implement label interactions.\n\t\tif (chart[EXPANDO_KEY]._listened) {\n\t\t\tswitch (event.type) {\n\t\t\tcase 'mousemove':\n\t\t\tcase 'mouseout':\n\t\t\t\thandleMoveEvents(chart, event);\n\t\t\t\tbreak;\n\t\t\tcase 'click':\n\t\t\t\thandleClickEvents(chart, event);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t}\n\t\t}\n\t},\n\n\tafterEvent: function(chart) {\n\t\tvar expando = chart[EXPANDO_KEY];\n\t\tvar previous = expando._actives;\n\t\tvar actives = expando._actives = chart.lastActive || [];  // public API?!\n\t\tvar updates = utils.arrayDiff(previous, actives);\n\t\tvar i, ilen, j, jlen, update, label, labels;\n\n\t\tfor (i = 0, ilen = updates.length; i < ilen; ++i) {\n\t\t\tupdate = updates[i];\n\t\t\tif (update[1]) {\n\t\t\t\tlabels = update[0][EXPANDO_KEY] || [];\n\t\t\t\tfor (j = 0, jlen = labels.length; j < jlen; ++j) {\n\t\t\t\t\tlabel = labels[j];\n\t\t\t\t\tlabel.$context.active = (update[1] === 1);\n\t\t\t\t\tlabel.update(label.$context);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (expando._dirty || updates.length) {\n\t\t\tlayout.update(expando._labels);\n\t\t\tinvalidate(chart);\n\t\t}\n\n\t\tdelete expando._dirty;\n\t}\n};\n\n// TODO Remove at version 1, we shouldn't automatically register plugins.\n// https://github.com/chartjs/chartjs-plugin-datalabels/issues/42\nChart.plugins.register(plugin);\n\nreturn plugin;\n\n}));\n"]}